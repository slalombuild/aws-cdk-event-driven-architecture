"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const deploy_1 = require("../lib/deploy");
const sleep = async (duration) => new Promise((resolve) => setTimeout(() => resolve(), duration));
// Not great to have actual sleeps in the tests, but they mostly just exist to give 'p-queue'
// a chance to start new tasks.
const SLOW = 200;
/**
 * Repurposing unused stack attributes to create specific test scenarios
 * - stack.name          = deployment duration
 * - stack.displayName   = error message
 */
describe('DeployStacks', () => {
    const deployedStacks = [];
    const deployStack = async ({ id, displayName, name }) => {
        const errorMessage = displayName;
        const timeout = Number(name) || 0;
        await sleep(timeout);
        if (errorMessage) {
            throw Error(errorMessage);
        }
        deployedStacks.push(id);
    };
    beforeEach(() => {
        deployedStacks.splice(0);
    });
    // Success
    test.each([
        // Concurrency 1
        { scenario: 'No Stacks', concurrency: 1, toDeploy: [], expected: [] },
        { scenario: 'A', concurrency: 1, toDeploy: [{ id: 'A', dependencies: [] }], expected: ['A'] },
        { scenario: 'A, B', concurrency: 1, toDeploy: [{ id: 'A', dependencies: [] }, { id: 'B', dependencies: [] }], expected: ['A', 'B'] },
        { scenario: 'A -> B', concurrency: 1, toDeploy: [{ id: 'A', dependencies: [] }, { id: 'B', dependencies: [{ id: 'A' }] }], expected: ['A', 'B'] },
        { scenario: '[unsorted] A -> B', concurrency: 1, toDeploy: [{ id: 'B', dependencies: [{ id: 'A' }] }, { id: 'A', dependencies: [] }], expected: ['A', 'B'] },
        { scenario: 'A -> B -> C', concurrency: 1, toDeploy: [{ id: 'A', dependencies: [] }, { id: 'B', dependencies: [{ id: 'A' }] }, { id: 'C', dependencies: [{ id: 'B' }] }], expected: ['A', 'B', 'C'] },
        { scenario: 'A -> B, A -> C', concurrency: 1, toDeploy: [{ id: 'A', dependencies: [] }, { id: 'B', dependencies: [{ id: 'A' }] }, { id: 'C', dependencies: [{ id: 'A' }] }], expected: ['A', 'B', 'C'] },
        {
            scenario: 'A (slow), B',
            concurrency: 1,
            toDeploy: [
                { id: 'A', dependencies: [], name: SLOW },
                { id: 'B', dependencies: [] },
            ],
            expected: ['A', 'B'],
        },
        {
            scenario: 'A -> B, C -> D',
            concurrency: 1,
            toDeploy: [
                { id: 'A', dependencies: [] },
                { id: 'B', dependencies: [{ id: 'A' }] },
                { id: 'C', dependencies: [] },
                { id: 'D', dependencies: [{ id: 'C' }] },
            ],
            expected: ['A', 'C', 'B', 'D'],
        },
        {
            scenario: 'A (slow) -> B, C -> D',
            concurrency: 1,
            toDeploy: [
                { id: 'A', dependencies: [], name: SLOW },
                { id: 'B', dependencies: [{ id: 'A' }] },
                { id: 'C', dependencies: [] },
                { id: 'D', dependencies: [{ id: 'C' }] },
            ],
            expected: ['A', 'C', 'B', 'D'],
        },
        // Concurrency 2
        { scenario: 'No Stacks', concurrency: 2, toDeploy: [], expected: [] },
        { scenario: 'A', concurrency: 2, toDeploy: [{ id: 'A', dependencies: [] }], expected: ['A'] },
        { scenario: 'A, B', concurrency: 2, toDeploy: [{ id: 'A', dependencies: [] }, { id: 'B', dependencies: [] }], expected: ['A', 'B'] },
        { scenario: 'A -> B', concurrency: 2, toDeploy: [{ id: 'A', dependencies: [] }, { id: 'B', dependencies: [{ id: 'A' }] }], expected: ['A', 'B'] },
        { scenario: '[unsorted] A -> B', concurrency: 2, toDeploy: [{ id: 'B', dependencies: [{ id: 'A' }] }, { id: 'A', dependencies: [] }], expected: ['A', 'B'] },
        { scenario: 'A -> B -> C', concurrency: 2, toDeploy: [{ id: 'A', dependencies: [] }, { id: 'B', dependencies: [{ id: 'A' }] }, { id: 'C', dependencies: [{ id: 'B' }] }], expected: ['A', 'B', 'C'] },
        { scenario: 'A -> B, A -> C', concurrency: 2, toDeploy: [{ id: 'A', dependencies: [] }, { id: 'B', dependencies: [{ id: 'A' }] }, { id: 'C', dependencies: [{ id: 'A' }] }], expected: ['A', 'B', 'C'] },
        {
            scenario: 'A, B',
            concurrency: 2,
            toDeploy: [
                { id: 'A', dependencies: [], name: SLOW },
                { id: 'B', dependencies: [] },
            ],
            expected: ['B', 'A'],
        },
        {
            scenario: 'A -> B, C -> D',
            concurrency: 2,
            toDeploy: [
                { id: 'A', dependencies: [] },
                { id: 'B', dependencies: [{ id: 'A' }] },
                { id: 'C', dependencies: [] },
                { id: 'D', dependencies: [{ id: 'C' }] },
            ],
            expected: ['A', 'C', 'B', 'D'],
        },
        {
            scenario: 'A (slow) -> B, C -> D',
            concurrency: 2,
            toDeploy: [
                { id: 'A', dependencies: [], name: SLOW },
                { id: 'B', dependencies: [{ id: 'A' }] },
                { id: 'C', dependencies: [] },
                { id: 'D', dependencies: [{ id: 'C' }] },
            ],
            expected: ['C', 'D', 'A', 'B'],
        },
        {
            scenario: 'A -> B, A not selected',
            concurrency: 1,
            toDeploy: [
                { id: 'B', dependencies: [{ id: 'A' }] },
            ],
            expected: ['B'],
        },
    ])('Success - Concurrency: $concurrency - $scenario', async ({ concurrency, expected, toDeploy }) => {
        await expect(deploy_1.deployStacks(toDeploy, { concurrency, deployStack })).resolves.toBeUndefined();
        expect(deployedStacks).toStrictEqual(expected);
    });
    // Failure
    test.each([
        // Concurrency 1
        { scenario: 'A (error)', concurrency: 1, toDeploy: [{ id: 'A', dependencies: [], displayName: 'A' }], expectedError: 'A', expectedStacks: [] },
        { scenario: 'A (error), B', concurrency: 1, toDeploy: [{ id: 'A', dependencies: [], displayName: 'A' }, { id: 'B', dependencies: [] }], expectedError: 'A', expectedStacks: [] },
        { scenario: 'A, B (error)', concurrency: 1, toDeploy: [{ id: 'A', dependencies: [] }, { id: 'B', dependencies: [], displayName: 'B' }], expectedError: 'B', expectedStacks: ['A'] },
        { scenario: 'A (error) -> B', concurrency: 1, toDeploy: [{ id: 'A', dependencies: [], displayName: 'A' }, { id: 'B', dependencies: [{ id: 'A' }] }], expectedError: 'A', expectedStacks: [] },
        { scenario: '[unsorted] A (error) -> B', concurrency: 1, toDeploy: [{ id: 'B', dependencies: [{ id: 'A' }] }, { id: 'A', dependencies: [], displayName: 'A' }], expectedError: 'A', expectedStacks: [] },
        {
            scenario: 'A (error) -> B, C -> D',
            concurrency: 1,
            toDeploy: [
                { id: 'A', dependencies: [], displayName: 'A' },
                { id: 'B', dependencies: [{ id: 'A' }] },
                { id: 'C', dependencies: [] },
                { id: 'D', dependencies: [{ id: 'C' }] },
            ],
            expectedError: 'A',
            expectedStacks: [],
        },
        {
            scenario: 'A -> B, C (error) -> D',
            concurrency: 1,
            toDeploy: [
                { id: 'A', dependencies: [] },
                { id: 'B', dependencies: [{ id: 'A' }] },
                { id: 'C', dependencies: [], displayName: 'C', name: SLOW },
                { id: 'D', dependencies: [{ id: 'C' }] },
            ],
            expectedError: 'C',
            expectedStacks: ['A'],
        },
        // Concurrency 2
        { scenario: 'A (error)', concurrency: 2, toDeploy: [{ id: 'A', dependencies: [], displayName: 'A' }], expectedError: 'A', expectedStacks: [] },
        { scenario: 'A (error), B', concurrency: 2, toDeploy: [{ id: 'A', dependencies: [], displayName: 'A' }, { id: 'B', dependencies: [] }], expectedError: 'A', expectedStacks: ['B'] },
        { scenario: 'A, B (error)', concurrency: 2, toDeploy: [{ id: 'A', dependencies: [] }, { id: 'B', dependencies: [], displayName: 'B' }], expectedError: 'B', expectedStacks: ['A'] },
        { scenario: 'A (error) -> B', concurrency: 2, toDeploy: [{ id: 'A', dependencies: [], displayName: 'A' }, { id: 'B', dependencies: [{ id: 'A' }] }], expectedError: 'A', expectedStacks: [] },
        { scenario: '[unsorted] A (error) -> B', concurrency: 2, toDeploy: [{ id: 'B', dependencies: [{ id: 'A' }] }, { id: 'A', dependencies: [], displayName: 'A' }], expectedError: 'A', expectedStacks: [] },
        {
            scenario: 'A (error) -> B, C -> D',
            concurrency: 2,
            toDeploy: [
                { id: 'A', dependencies: [], displayName: 'A' },
                { id: 'B', dependencies: [{ id: 'A' }] },
                { id: 'C', dependencies: [] },
                { id: 'D', dependencies: [{ id: 'C' }] },
            ],
            expectedError: 'A',
            expectedStacks: ['C'],
        },
        {
            scenario: 'A -> B, C (error) -> D',
            concurrency: 2,
            toDeploy: [
                { id: 'A', dependencies: [] },
                { id: 'B', dependencies: [{ id: 'A' }] },
                { id: 'C', dependencies: [], displayName: 'C', name: SLOW },
                { id: 'D', dependencies: [{ id: 'C' }] },
            ],
            expectedError: 'C',
            expectedStacks: ['A', 'B'],
        },
    ])('Failure - Concurrency: $concurrency - $scenario', async ({ concurrency, expectedError, toDeploy, expectedStacks }) => {
        await expect(deploy_1.deployStacks(toDeploy, { concurrency, deployStack })).rejects.toThrowError(expectedError);
        expect(deployedStacks).toStrictEqual(expectedStacks);
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVwbG95LnRlc3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJkZXBsb3kudGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLDBDQUE2QztBQUk3QyxNQUFNLEtBQUssR0FBRyxLQUFLLEVBQUUsUUFBZ0IsRUFBRSxFQUFFLENBQUMsSUFBSSxPQUFPLENBQU8sQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxPQUFPLEVBQUUsRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDO0FBRWhILDZGQUE2RjtBQUM3RiwrQkFBK0I7QUFDL0IsTUFBTSxJQUFJLEdBQUcsR0FBRyxDQUFDO0FBRWpCOzs7O0dBSUc7QUFDSCxRQUFRLENBQUMsY0FBYyxFQUFFLEdBQUcsRUFBRTtJQUM1QixNQUFNLGNBQWMsR0FBYSxFQUFFLENBQUM7SUFDcEMsTUFBTSxXQUFXLEdBQUcsS0FBSyxFQUFFLEVBQUUsRUFBRSxFQUFFLFdBQVcsRUFBRSxJQUFJLEVBQVMsRUFBRSxFQUFFO1FBQzdELE1BQU0sWUFBWSxHQUFHLFdBQVcsQ0FBQztRQUNqQyxNQUFNLE9BQU8sR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRWxDLE1BQU0sS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBRXJCLElBQUksWUFBWSxFQUFFO1lBQ2hCLE1BQU0sS0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFDO1NBQzNCO1FBRUQsY0FBYyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUMxQixDQUFDLENBQUM7SUFFRixVQUFVLENBQUMsR0FBRyxFQUFFO1FBQ2QsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUMzQixDQUFDLENBQUMsQ0FBQztJQUVILFVBQVU7SUFDVixJQUFJLENBQUMsSUFBSSxDQUFDO1FBQ1IsZ0JBQWdCO1FBQ2hCLEVBQUUsUUFBUSxFQUFFLFdBQVcsRUFBRSxXQUFXLEVBQUUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxFQUFFLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRTtRQUNyRSxFQUFFLFFBQVEsRUFBRSxHQUFHLEVBQUUsV0FBVyxFQUFFLENBQUMsRUFBRSxRQUFRLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsWUFBWSxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsUUFBUSxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUU7UUFDN0YsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLFdBQVcsRUFBRSxDQUFDLEVBQUUsUUFBUSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLFlBQVksRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsWUFBWSxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsUUFBUSxFQUFFLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxFQUFFO1FBQ3BJLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxXQUFXLEVBQUUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBRSxZQUFZLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLFlBQVksRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsRUFBRTtRQUNqSixFQUFFLFFBQVEsRUFBRSxtQkFBbUIsRUFBRSxXQUFXLEVBQUUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLFlBQVksRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsRUFBRTtRQUM1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QUFFLFFBQVEsRUFBRSxFQUFFLEVBQUU7UUFDckUsRUFBRSxRQUFRLEVBQUUsR0FBRyxFQUFFLFdBQVcsRUFBRSxDQUFDLEVBQUUsUUFBUSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLFlBQVksRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFO1FBQzdGLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxXQUFXLEVBQUUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBRSxZQUFZLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLFlBQVksRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsRUFBRTtRQUNwSSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsV0FBVyxFQUFFLENBQUMsRUFBRSxRQUFRLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsWUFBWSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxRQUFRLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLEVBQUU7UUFDakosRUFBRSxRQUFRLEVBQUUsbUJBQW1CLEVBQUUsV0FBVyxFQUFFLENBQUMsRUFBRSxRQUFRLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsWUFBWSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBRSxZQUFZLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxRQUFRLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLEVBQUU7UUFDNUosRUFBRSxRQUFRLEVBQUUsYUFBYSxFQUFFLFdBQVcsRUFBRSxDQUFDLEVBQUUsUUFBUSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLFlBQVksRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsWUFBWSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxRQUFRLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxFQUFFO1FBQ3JNLEVBQUUsUUFBUSxFQUFFLGdCQUFnQixFQUFFLFdBQVcsRUFBRSxDQUFDLEVBQUUsUUFBUSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLFlBQVksRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsWUFBWSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxRQUFRLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxFQUFFO1FBQ3hNO1lBQ0UsUUFBUSxFQUFFLE1BQU07WUFDaEIsV0FBVyxFQUFFLENBQUM7WUFDZCxRQUFRLEVBQUU7Z0JBQ1IsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLFlBQVksRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRTtnQkFDekMsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLFlBQVksRUFBRSxFQUFFLEVBQUU7YUFDOUI7WUFDRCxRQUFRLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDO1NBQ3JCO1FBQ0Q7WUFDRSxRQUFRLEVBQUUsZ0JBQWdCO1lB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LEVBQUUsRUFBRSxXQUFXLEVBQUUsYUFBYSxFQUFFLFFBQVEsRUFBRSxjQUFjLEVBQUUsRUFBRSxFQUFFO1FBQ3ZILE1BQU0sTUFBTSxDQUFDLHFCQUFZLENBQUMsUUFBOEIsRUFBRSxFQUFFLFdBQVcsRUFBRSxXQUFXLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUU3SCxNQUFNLENBQUMsY0FBYyxDQUFDLENBQUMsYUFBYSxDQUFDLGNBQWMsQ0FBQyxDQUFDO0lBQ3ZELENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBjeGFwaSBmcm9tICdAYXdzLWNkay9jeC1hcGknO1xuaW1wb3J0IHsgZGVwbG95U3RhY2tzIH0gZnJvbSAnLi4vbGliL2RlcGxveSc7XG5cbnR5cGUgU3RhY2sgPSBjeGFwaS5DbG91ZEZvcm1hdGlvblN0YWNrQXJ0aWZhY3Q7XG5cbmNvbnN0IHNsZWVwID0gYXN5bmMgKGR1cmF0aW9uOiBudW1iZXIpID0+IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KCgpID0+IHJlc29sdmUoKSwgZHVyYXRpb24pKTtcblxuLy8gTm90IGdyZWF0IHRvIGhhdmUgYWN0dWFsIHNsZWVwcyBpbiB0aGUgdGVzdHMsIGJ1dCB0aGV5IG1vc3RseSBqdXN0IGV4aXN0IHRvIGdpdmUgJ3AtcXVldWUnXG4vLyBhIGNoYW5jZSB0byBzdGFydCBuZXcgdGFza3MuXG5jb25zdCBTTE9XID0gMjAwO1xuXG4vKipcbiAqIFJlcHVycG9zaW5nIHVudXNlZCBzdGFjayBhdHRyaWJ1dGVzIHRvIGNyZWF0ZSBzcGVjaWZpYyB0ZXN0IHNjZW5hcmlvc1xuICogLSBzdGFjay5uYW1lICAgICAgICAgID0gZGVwbG95bWVudCBkdXJhdGlvblxuICogLSBzdGFjay5kaXNwbGF5TmFtZSAgID0gZXJyb3IgbWVzc2FnZVxuICovXG5kZXNjcmliZSgnRGVwbG95U3RhY2tzJywgKCkgPT4ge1xuICBjb25zdCBkZXBsb3llZFN0YWNrczogc3RyaW5nW10gPSBbXTtcbiAgY29uc3QgZGVwbG95U3RhY2sgPSBhc3luYyAoeyBpZCwgZGlzcGxheU5hbWUsIG5hbWUgfTogU3RhY2spID0+IHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBkaXNwbGF5TmFtZTtcbiAgICBjb25zdCB0aW1lb3V0ID0gTnVtYmVyKG5hbWUpIHx8IDA7XG5cbiAgICBhd2FpdCBzbGVlcCh0aW1lb3V0KTtcblxuICAgIGlmIChlcnJvck1lc3NhZ2UpIHtcbiAgICAgIHRocm93IEVycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgfVxuXG4gICAgZGVwbG95ZWRTdGFja3MucHVzaChpZCk7XG4gIH07XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgZGVwbG95ZWRTdGFja3Muc3BsaWNlKDApO1xuICB9KTtcblxuICAvLyBTdWNjZXNzXG4gIHRlc3QuZWFjaChbXG4gICAgLy8gQ29uY3VycmVuY3kgMVxuICAgIHsgc2NlbmFyaW86ICdObyBTdGFja3MnLCBjb25jdXJyZW5jeTogMSwgdG9EZXBsb3k6IFtdLCBleHBlY3RlZDogW10gfSxcbiAgICB7IHNjZW5hcmlvOiAnQScsIGNvbmN1cnJlbmN5OiAxLCB0b0RlcGxveTogW3sgaWQ6ICdBJywgZGVwZW5kZW5jaWVzOiBbXSB9XSwgZXhwZWN0ZWQ6IFsnQSddIH0sXG4gICAgeyBzY2VuYXJpbzogJ0EsIEInLCBjb25jdXJyZW5jeTogMSwgdG9EZXBsb3k6IFt7IGlkOiAnQScsIGRlcGVuZGVuY2llczogW10gfSwgeyBpZDogJ0InLCBkZXBlbmRlbmNpZXM6IFtdIH1dLCBleHBlY3RlZDogWydBJywgJ0InXSB9LFxuICAgIHsgc2NlbmFyaW86ICdBIC0+IEInLCBjb25jdXJyZW5jeTogMSwgdG9EZXBsb3k6IFt7IGlkOiAnQScsIGRlcGVuZGVuY2llczogW10gfSwgeyBpZDogJ0InLCBkZXBlbmRlbmNpZXM6IFt7IGlkOiAnQScgfV0gfV0sIGV4cGVjdGVkOiBbJ0EnLCAnQiddIH0sXG4gICAgeyBzY2VuYXJpbzogJ1t1bnNvcnRlZF0gQSAtPiBCJywgY29uY3VycmVuY3k6IDEsIHRvRGVwbG95OiBbeyBpZDogJ0InLCBkZXBlbmRlbmNpZXM6IFt7IGlkOiAnQScgfV0gfSwgeyBpZDogJ0EnLCBkZXBlbmRlbmNpZXM6IFtdIH1dLCBleHBlY3RlZDogWydBJywgJ0InXSB9LFxuICAgIHsgc2NlbmFyaW86ICdBIC0+IEIgLT4gQycsIGNvbmN1cnJlbmN5OiAxLCB0b0RlcGxveTogW3sgaWQ6ICdBJywgZGVwZW5kZW5jaWVzOiBbXSB9LCB7IGlkOiAnQicsIGRlcGVuZGVuY2llczogW3sgaWQ6ICdBJyB9XSB9LCB7IGlkOiAnQycsIGRlcGVuZGVuY2llczogW3sgaWQ6ICdCJyB9XSB9XSwgZXhwZWN0ZWQ6IFsnQScsICdCJywgJ0MnXSB9LFxuICAgIHsgc2NlbmFyaW86ICdBIC0+IEIsIEEgLT4gQycsIGNvbmN1cnJlbmN5OiAxLCB0b0RlcGxveTogW3sgaWQ6ICdBJywgZGVwZW5kZW5jaWVzOiBbXSB9LCB7IGlkOiAnQicsIGRlcGVuZGVuY2llczogW3sgaWQ6ICdBJyB9XSB9LCB7IGlkOiAnQycsIGRlcGVuZGVuY2llczogW3sgaWQ6ICdBJyB9XSB9XSwgZXhwZWN0ZWQ6IFsnQScsICdCJywgJ0MnXSB9LFxuICAgIHtcbiAgICAgIHNjZW5hcmlvOiAnQSAoc2xvdyksIEInLFxuICAgICAgY29uY3VycmVuY3k6IDEsXG4gICAgICB0b0RlcGxveTogW1xuICAgICAgICB7IGlkOiAnQScsIGRlcGVuZGVuY2llczogW10sIG5hbWU6IFNMT1cgfSxcbiAgICAgICAgeyBpZDogJ0InLCBkZXBlbmRlbmNpZXM6IFtdIH0sXG4gICAgICBdLFxuICAgICAgZXhwZWN0ZWQ6IFsnQScsICdCJ10sXG4gICAgfSxcbiAgICB7XG4gICAgICBzY2VuYXJpbzogJ0EgLT4gQiwgQyAtPiBEJyxcbiAgICAgIGNvbmN1cnJlbmN5OiAxLFxuICAgICAgdG9EZXBsb3k6IFtcbiAgICAgICAgeyBpZDogJ0EnLCBkZXBlbmRlbmNpZXM6IFtdIH0sXG4gICAgICAgIHsgaWQ6ICdCJywgZGVwZW5kZW5jaWVzOiBbeyBpZDogJ0EnIH1dIH0sXG4gICAgICAgIHsgaWQ6ICdDJywgZGVwZW5kZW5jaWVzOiBbXSB9LFxuICAgICAgICB7IGlkOiAnRCcsIGRlcGVuZGVuY2llczogW3sgaWQ6ICdDJyB9XSB9LFxuICAgICAgXSxcbiAgICAgIGV4cGVjdGVkOiBbJ0EnLCAnQycsICdCJywgJ0QnXSxcbiAgICB9LFxuICAgIHtcbiAgICAgIHNjZW5hcmlvOiAnQSAoc2xvdykgLT4gQiwgQyAtPiBEJyxcbiAgICAgIGNvbmN1cnJlbmN5OiAxLFxuICAgICAgdG9EZXBsb3k6IFtcbiAgICAgICAgeyBpZDogJ0EnLCBkZXBlbmRlbmNpZXM6IFtdLCBuYW1lOiBTTE9XIH0sXG4gICAgICAgIHsgaWQ6ICdCJywgZGVwZW5kZW5jaWVzOiBbeyBpZDogJ0EnIH1dIH0sXG4gICAgICAgIHsgaWQ6ICdDJywgZGVwZW5kZW5jaWVzOiBbXSB9LFxuICAgICAgICB7IGlkOiAnRCcsIGRlcGVuZGVuY2llczogW3sgaWQ6ICdDJyB9XSB9LFxuICAgICAgXSxcbiAgICAgIGV4cGVjdGVkOiBbJ0EnLCAnQycsICdCJywgJ0QnXSxcbiAgICB9LFxuXG4gICAgLy8gQ29uY3VycmVuY3kgMlxuICAgIHsgc2NlbmFyaW86ICdObyBTdGFja3MnLCBjb25jdXJyZW5jeTogMiwgdG9EZXBsb3k6IFtdLCBleHBlY3RlZDogW10gfSxcbiAgICB7IHNjZW5hcmlvOiAnQScsIGNvbmN1cnJlbmN5OiAyLCB0b0RlcGxveTogW3sgaWQ6ICdBJywgZGVwZW5kZW5jaWVzOiBbXSB9XSwgZXhwZWN0ZWQ6IFsnQSddIH0sXG4gICAgeyBzY2VuYXJpbzogJ0EsIEInLCBjb25jdXJyZW5jeTogMiwgdG9EZXBsb3k6IFt7IGlkOiAnQScsIGRlcGVuZGVuY2llczogW10gfSwgeyBpZDogJ0InLCBkZXBlbmRlbmNpZXM6IFtdIH1dLCBleHBlY3RlZDogWydBJywgJ0InXSB9LFxuICAgIHsgc2NlbmFyaW86ICdBIC0+IEInLCBjb25jdXJyZW5jeTogMiwgdG9EZXBsb3k6IFt7IGlkOiAnQScsIGRlcGVuZGVuY2llczogW10gfSwgeyBpZDogJ0InLCBkZXBlbmRlbmNpZXM6IFt7IGlkOiAnQScgfV0gfV0sIGV4cGVjdGVkOiBbJ0EnLCAnQiddIH0sXG4gICAgeyBzY2VuYXJpbzogJ1t1bnNvcnRlZF0gQSAtPiBCJywgY29uY3VycmVuY3k6IDIsIHRvRGVwbG95OiBbeyBpZDogJ0InLCBkZXBlbmRlbmNpZXM6IFt7IGlkOiAnQScgfV0gfSwgeyBpZDogJ0EnLCBkZXBlbmRlbmNpZXM6IFtdIH1dLCBleHBlY3RlZDogWydBJywgJ0InXSB9LFxuICAgIHsgc2NlbmFyaW86ICdBIC0+IEIgLT4gQycsIGNvbmN1cnJlbmN5OiAyLCB0b0RlcGxveTogW3sgaWQ6ICdBJywgZGVwZW5kZW5jaWVzOiBbXSB9LCB7IGlkOiAnQicsIGRlcGVuZGVuY2llczogW3sgaWQ6ICdBJyB9XSB9LCB7IGlkOiAnQycsIGRlcGVuZGVuY2llczogW3sgaWQ6ICdCJyB9XSB9XSwgZXhwZWN0ZWQ6IFsnQScsICdCJywgJ0MnXSB9LFxuICAgIHsgc2NlbmFyaW86ICdBIC0+IEIsIEEgLT4gQycsIGNvbmN1cnJlbmN5OiAyLCB0b0RlcGxveTogW3sgaWQ6ICdBJywgZGVwZW5kZW5jaWVzOiBbXSB9LCB7IGlkOiAnQicsIGRlcGVuZGVuY2llczogW3sgaWQ6ICdBJyB9XSB9LCB7IGlkOiAnQycsIGRlcGVuZGVuY2llczogW3sgaWQ6ICdBJyB9XSB9XSwgZXhwZWN0ZWQ6IFsnQScsICdCJywgJ0MnXSB9LFxuICAgIHtcbiAgICAgIHNjZW5hcmlvOiAnQSwgQicsXG4gICAgICBjb25jdXJyZW5jeTogMixcbiAgICAgIHRvRGVwbG95OiBbXG4gICAgICAgIHsgaWQ6ICdBJywgZGVwZW5kZW5jaWVzOiBbXSwgbmFtZTogU0xPVyB9LFxuICAgICAgICB7IGlkOiAnQicsIGRlcGVuZGVuY2llczogW10gfSxcbiAgICAgIF0sXG4gICAgICBleHBlY3RlZDogWydCJywgJ0EnXSxcbiAgICB9LFxuICAgIHtcbiAgICAgIHNjZW5hcmlvOiAnQSAtPiBCLCBDIC0+IEQnLFxuICAgICAgY29uY3VycmVuY3k6IDIsXG4gICAgICB0b0RlcGxveTogW1xuICAgICAgICB7IGlkOiAnQScsIGRlcGVuZGVuY2llczogW10gfSxcbiAgICAgICAgeyBpZDogJ0InLCBkZXBlbmRlbmNpZXM6IFt7IGlkOiAnQScgfV0gfSxcbiAgICAgICAgeyBpZDogJ0MnLCBkZXBlbmRlbmNpZXM6IFtdIH0sXG4gICAgICAgIHsgaWQ6ICdEJywgZGVwZW5kZW5jaWVzOiBbeyBpZDogJ0MnIH1dIH0sXG4gICAgICBdLFxuICAgICAgZXhwZWN0ZWQ6IFsnQScsICdDJywgJ0InLCAnRCddLFxuICAgIH0sXG4gICAge1xuICAgICAgc2NlbmFyaW86ICdBIChzbG93KSAtPiBCLCBDIC0+IEQnLFxuICAgICAgY29uY3VycmVuY3k6IDIsXG4gICAgICB0b0RlcGxveTogW1xuICAgICAgICB7IGlkOiAnQScsIGRlcGVuZGVuY2llczogW10sIG5hbWU6IFNMT1cgfSxcbiAgICAgICAgeyBpZDogJ0InLCBkZXBlbmRlbmNpZXM6IFt7IGlkOiAnQScgfV0gfSxcbiAgICAgICAgeyBpZDogJ0MnLCBkZXBlbmRlbmNpZXM6IFtdIH0sXG4gICAgICAgIHsgaWQ6ICdEJywgZGVwZW5kZW5jaWVzOiBbeyBpZDogJ0MnIH1dIH0sXG4gICAgICBdLFxuICAgICAgZXhwZWN0ZWQ6IFsnQycsICdEJywgJ0EnLCAnQiddLFxuICAgIH0sXG4gICAge1xuICAgICAgc2NlbmFyaW86ICdBIC0+IEIsIEEgbm90IHNlbGVjdGVkJyxcbiAgICAgIGNvbmN1cnJlbmN5OiAxLFxuICAgICAgdG9EZXBsb3k6IFtcbiAgICAgICAgeyBpZDogJ0InLCBkZXBlbmRlbmNpZXM6IFt7IGlkOiAnQScgfV0gfSxcbiAgICAgIF0sXG4gICAgICBleHBlY3RlZDogWydCJ10sXG4gICAgfSxcbiAgXSkoJ1N1Y2Nlc3MgLSBDb25jdXJyZW5jeTogJGNvbmN1cnJlbmN5IC0gJHNjZW5hcmlvJywgYXN5bmMgKHsgY29uY3VycmVuY3ksIGV4cGVjdGVkLCB0b0RlcGxveSB9KSA9PiB7XG4gICAgYXdhaXQgZXhwZWN0KGRlcGxveVN0YWNrcyh0b0RlcGxveSBhcyB1bmtub3duIGFzIFN0YWNrW10sIHsgY29uY3VycmVuY3ksIGRlcGxveVN0YWNrIH0pKS5yZXNvbHZlcy50b0JlVW5kZWZpbmVkKCk7XG5cbiAgICBleHBlY3QoZGVwbG95ZWRTdGFja3MpLnRvU3RyaWN0RXF1YWwoZXhwZWN0ZWQpO1xuICB9KTtcblxuICAvLyBGYWlsdXJlXG4gIHRlc3QuZWFjaChbXG4gICAgLy8gQ29uY3VycmVuY3kgMVxuICAgIHsgc2NlbmFyaW86ICdBIChlcnJvciknLCBjb25jdXJyZW5jeTogMSwgdG9EZXBsb3k6IFt7IGlkOiAnQScsIGRlcGVuZGVuY2llczogW10sIGRpc3BsYXlOYW1lOiAnQScgfV0sIGV4cGVjdGVkRXJyb3I6ICdBJywgZXhwZWN0ZWRTdGFja3M6IFtdIH0sXG4gICAgeyBzY2VuYXJpbzogJ0EgKGVycm9yKSwgQicsIGNvbmN1cnJlbmN5OiAxLCB0b0RlcGxveTogW3sgaWQ6ICdBJywgZGVwZW5kZW5jaWVzOiBbXSwgZGlzcGxheU5hbWU6ICdBJyB9LCB7IGlkOiAnQicsIGRlcGVuZGVuY2llczogW10gfV0sIGV4cGVjdGVkRXJyb3I6ICdBJywgZXhwZWN0ZWRTdGFja3M6IFtdIH0sXG4gICAgeyBzY2VuYXJpbzogJ0EsIEIgKGVycm9yKScsIGNvbmN1cnJlbmN5OiAxLCB0b0RlcGxveTogW3sgaWQ6ICdBJywgZGVwZW5kZW5jaWVzOiBbXSB9LCB7IGlkOiAnQicsIGRlcGVuZGVuY2llczogW10sIGRpc3BsYXlOYW1lOiAnQicgfV0sIGV4cGVjdGVkRXJyb3I6ICdCJywgZXhwZWN0ZWRTdGFja3M6IFsnQSddIH0sXG4gICAgeyBzY2VuYXJpbzogJ0EgKGVycm9yKSAtPiBCJywgY29uY3VycmVuY3k6IDEsIHRvRGVwbG95OiBbeyBpZDogJ0EnLCBkZXBlbmRlbmNpZXM6IFtdLCBkaXNwbGF5TmFtZTogJ0EnIH0sIHsgaWQ6ICdCJywgZGVwZW5kZW5jaWVzOiBbeyBpZDogJ0EnIH1dIH1dLCBleHBlY3RlZEVycm9yOiAnQScsIGV4cGVjdGVkU3RhY2tzOiBbXSB9LFxuICAgIHsgc2NlbmFyaW86ICdbdW5zb3J0ZWRdIEEgKGVycm9yKSAtPiBCJywgY29uY3VycmVuY3k6IDEsIHRvRGVwbG95OiBbeyBpZDogJ0InLCBkZXBlbmRlbmNpZXM6IFt7IGlkOiAnQScgfV0gfSwgeyBpZDogJ0EnLCBkZXBlbmRlbmNpZXM6IFtdLCBkaXNwbGF5TmFtZTogJ0EnIH1dLCBleHBlY3RlZEVycm9yOiAnQScsIGV4cGVjdGVkU3RhY2tzOiBbXSB9LFxuICAgIHtcbiAgICAgIHNjZW5hcmlvOiAnQSAoZXJyb3IpIC0+IEIsIEMgLT4gRCcsXG4gICAgICBjb25jdXJyZW5jeTogMSxcbiAgICAgIHRvRGVwbG95OiBbXG4gICAgICAgIHsgaWQ6ICdBJywgZGVwZW5kZW5jaWVzOiBbXSwgZGlzcGxheU5hbWU6ICdBJyB9LFxuICAgICAgICB7IGlkOiAnQicsIGRlcGVuZGVuY2llczogW3sgaWQ6ICdBJyB9XSB9LFxuICAgICAgICB7IGlkOiAnQycsIGRlcGVuZGVuY2llczogW10gfSxcbiAgICAgICAgeyBpZDogJ0QnLCBkZXBlbmRlbmNpZXM6IFt7IGlkOiAnQycgfV0gfSxcbiAgICAgIF0sXG4gICAgICBleHBlY3RlZEVycm9yOiAnQScsXG4gICAgICBleHBlY3RlZFN0YWNrczogW10sXG4gICAgfSxcbiAgICB7XG4gICAgICBzY2VuYXJpbzogJ0EgLT4gQiwgQyAoZXJyb3IpIC0+IEQnLFxuICAgICAgY29uY3VycmVuY3k6IDEsXG4gICAgICB0b0RlcGxveTogW1xuICAgICAgICB7IGlkOiAnQScsIGRlcGVuZGVuY2llczogW10gfSxcbiAgICAgICAgeyBpZDogJ0InLCBkZXBlbmRlbmNpZXM6IFt7IGlkOiAnQScgfV0gfSxcbiAgICAgICAgeyBpZDogJ0MnLCBkZXBlbmRlbmNpZXM6IFtdLCBkaXNwbGF5TmFtZTogJ0MnLCBuYW1lOiBTTE9XIH0sXG4gICAgICAgIHsgaWQ6ICdEJywgZGVwZW5kZW5jaWVzOiBbeyBpZDogJ0MnIH1dIH0sXG4gICAgICBdLFxuICAgICAgZXhwZWN0ZWRFcnJvcjogJ0MnLFxuICAgICAgZXhwZWN0ZWRTdGFja3M6IFsnQSddLFxuICAgIH0sXG5cbiAgICAvLyBDb25jdXJyZW5jeSAyXG4gICAgeyBzY2VuYXJpbzogJ0EgKGVycm9yKScsIGNvbmN1cnJlbmN5OiAyLCB0b0RlcGxveTogW3sgaWQ6ICdBJywgZGVwZW5kZW5jaWVzOiBbXSwgZGlzcGxheU5hbWU6ICdBJyB9XSwgZXhwZWN0ZWRFcnJvcjogJ0EnLCBleHBlY3RlZFN0YWNrczogW10gfSxcbiAgICB7IHNjZW5hcmlvOiAnQSAoZXJyb3IpLCBCJywgY29uY3VycmVuY3k6IDIsIHRvRGVwbG95OiBbeyBpZDogJ0EnLCBkZXBlbmRlbmNpZXM6IFtdLCBkaXNwbGF5TmFtZTogJ0EnIH0sIHsgaWQ6ICdCJywgZGVwZW5kZW5jaWVzOiBbXSB9XSwgZXhwZWN0ZWRFcnJvcjogJ0EnLCBleHBlY3RlZFN0YWNrczogWydCJ10gfSxcbiAgICB7IHNjZW5hcmlvOiAnQSwgQiAoZXJyb3IpJywgY29uY3VycmVuY3k6IDIsIHRvRGVwbG95OiBbeyBpZDogJ0EnLCBkZXBlbmRlbmNpZXM6IFtdIH0sIHsgaWQ6ICdCJywgZGVwZW5kZW5jaWVzOiBbXSwgZGlzcGxheU5hbWU6ICdCJyB9XSwgZXhwZWN0ZWRFcnJvcjogJ0InLCBleHBlY3RlZFN0YWNrczogWydBJ10gfSxcbiAgICB7IHNjZW5hcmlvOiAnQSAoZXJyb3IpIC0+IEInLCBjb25jdXJyZW5jeTogMiwgdG9EZXBsb3k6IFt7IGlkOiAnQScsIGRlcGVuZGVuY2llczogW10sIGRpc3BsYXlOYW1lOiAnQScgfSwgeyBpZDogJ0InLCBkZXBlbmRlbmNpZXM6IFt7IGlkOiAnQScgfV0gfV0sIGV4cGVjdGVkRXJyb3I6ICdBJywgZXhwZWN0ZWRTdGFja3M6IFtdIH0sXG4gICAgeyBzY2VuYXJpbzogJ1t1bnNvcnRlZF0gQSAoZXJyb3IpIC0+IEInLCBjb25jdXJyZW5jeTogMiwgdG9EZXBsb3k6IFt7IGlkOiAnQicsIGRlcGVuZGVuY2llczogW3sgaWQ6ICdBJyB9XSB9LCB7IGlkOiAnQScsIGRlcGVuZGVuY2llczogW10sIGRpc3BsYXlOYW1lOiAnQScgfV0sIGV4cGVjdGVkRXJyb3I6ICdBJywgZXhwZWN0ZWRTdGFja3M6IFtdIH0sXG4gICAge1xuICAgICAgc2NlbmFyaW86ICdBIChlcnJvcikgLT4gQiwgQyAtPiBEJyxcbiAgICAgIGNvbmN1cnJlbmN5OiAyLFxuICAgICAgdG9EZXBsb3k6IFtcbiAgICAgICAgeyBpZDogJ0EnLCBkZXBlbmRlbmNpZXM6IFtdLCBkaXNwbGF5TmFtZTogJ0EnIH0sXG4gICAgICAgIHsgaWQ6ICdCJywgZGVwZW5kZW5jaWVzOiBbeyBpZDogJ0EnIH1dIH0sXG4gICAgICAgIHsgaWQ6ICdDJywgZGVwZW5kZW5jaWVzOiBbXSB9LFxuICAgICAgICB7IGlkOiAnRCcsIGRlcGVuZGVuY2llczogW3sgaWQ6ICdDJyB9XSB9LFxuICAgICAgXSxcbiAgICAgIGV4cGVjdGVkRXJyb3I6ICdBJyxcbiAgICAgIGV4cGVjdGVkU3RhY2tzOiBbJ0MnXSxcbiAgICB9LFxuICAgIHtcbiAgICAgIHNjZW5hcmlvOiAnQSAtPiBCLCBDIChlcnJvcikgLT4gRCcsXG4gICAgICBjb25jdXJyZW5jeTogMixcbiAgICAgIHRvRGVwbG95OiBbXG4gICAgICAgIHsgaWQ6ICdBJywgZGVwZW5kZW5jaWVzOiBbXSB9LFxuICAgICAgICB7IGlkOiAnQicsIGRlcGVuZGVuY2llczogW3sgaWQ6ICdBJyB9XSB9LFxuICAgICAgICB7IGlkOiAnQycsIGRlcGVuZGVuY2llczogW10sIGRpc3BsYXlOYW1lOiAnQycsIG5hbWU6IFNMT1cgfSxcbiAgICAgICAgeyBpZDogJ0QnLCBkZXBlbmRlbmNpZXM6IFt7IGlkOiAnQycgfV0gfSxcbiAgICAgIF0sXG4gICAgICBleHBlY3RlZEVycm9yOiAnQycsXG4gICAgICBleHBlY3RlZFN0YWNrczogWydBJywgJ0InXSxcbiAgICB9LFxuICBdKSgnRmFpbHVyZSAtIENvbmN1cnJlbmN5OiAkY29uY3VycmVuY3kgLSAkc2NlbmFyaW8nLCBhc3luYyAoeyBjb25jdXJyZW5jeSwgZXhwZWN0ZWRFcnJvciwgdG9EZXBsb3ksIGV4cGVjdGVkU3RhY2tzIH0pID0+IHtcbiAgICBhd2FpdCBleHBlY3QoZGVwbG95U3RhY2tzKHRvRGVwbG95IGFzIHVua25vd24gYXMgU3RhY2tbXSwgeyBjb25jdXJyZW5jeSwgZGVwbG95U3RhY2sgfSkpLnJlamVjdHMudG9UaHJvd0Vycm9yKGV4cGVjdGVkRXJyb3IpO1xuXG4gICAgZXhwZWN0KGRlcGxveWVkU3RhY2tzKS50b1N0cmljdEVxdWFsKGV4cGVjdGVkU3RhY2tzKTtcbiAgfSk7XG59KTsiXX0=